<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Snailkarts – Engineered to Drift</title>

  <!-- FAVICONS -->
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="manifest" href="site.webmanifest">
  <link rel="mask-icon" href="safari-pinned-tab.svg" color="#000000">
  <link rel="shortcut icon" href="favicon.ico">

  <!-- THEME -->
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="theme-color" content="#000000">

  <!-- MAIN STYLESHEET -->
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <!-- ========================================================= -->
  <!--                       HEADER                              -->
  <!-- ========================================================= -->
  <header class="site-header">
    <a class="brand" href="#home" data-link>
      <span class="logo-badge">
        <!-- using the black snail image you uploaded in repo root -->
        <img class="logo" src="IMG_5286.PNG" alt="Snailkarts logo">
      </span>
      <span class="brand-text">
        <span class="brand-title">Snailkarts</span>
        <span class="brand-tagline">Engineered to Drift</span>
      </span>
    </a>

    <button class="nav-toggle" aria-label="Open navigation" aria-expanded="false">☰</button>

    <nav class="site-nav" id="nav">
      <a href="#home" data-link>Home</a>
      <a href="#karts" data-link>Karts</a>
      <a href="#riders" data-link>Riders</a>
      <a href="#gallery" data-link>Gallery</a>
      <a href="#build" data-link>Build</a>
      <a href="#contact" class="cta neon-btn pulse" data-link>Contact</a>

      <div class="social-wrap" aria-label="Follow Snailkarts">
        <span class="follow-label">Follow us</span>
        <div class="social-icons">
          <a href="https://instagram.com/Snailkarts" target="_blank" aria-label="Instagram">
            <svg viewBox="0 0 24 24"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm6.5-.9a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2zM12 9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>
          </a>
          <a href="https://youtube.com/@Snailkarts" target="_blank" aria-label="YouTube">
            <svg viewBox="0 0 24 24"><path d="M23.5 6.2a3 3 0 0 0-2.1-2.1C19.5 3.5 12 3.5 12 3.5s-7.5 0-9.4.6A3 3 0 0 0 .5 6.2 31 31 0 0 0 0 12a31 31 0 0 0 .6 5.8 3 3 0 0 0 2.1 2.1c1.9.6 9.3.6 9.3.6s7.5 0 9.4-.6a3 3 0 0 0 2.1-2.1 31 31 0 0 0 .6-5.8 31 31 0 0 0-.6-5.8zM9.8 15.5v-7l6.3 3.5-6.3 3.5z"/></svg>
          </a>
          <a href="https://www.tiktok.com/@snailkarts" target="_blank" aria-label="TikTok">
            <!-- Updated TikTok glyph -->
            <svg viewBox="0 0 24 24">
              <path d="M18.5 7.1a4.9 4.9 0 0 1-3-1.5A4.7 4.7 0 0 1 14 3h-2.6v12.2a2 2 0 1 1-1.4-1.9V10a4.8 4.8 0 1 0 3.8 8.4A4.7 4.7 0 0 0 15.4 15v-6a6.9 6.9 0 0 0 3.1 1.1z"/>
            </svg>
          </a>
        </div>
      </div>
    </nav>
  </header>

  <!-- ========================================================= -->
  <!--                       MAIN ROUTER                         -->
  <!-- ========================================================= -->
  <main id="app">

    <!-- ================= HERO ================= -->
    <section id="home" class="route hero">
      <div class="hero-media">
        <video class="hero-video" autoplay muted loop playsinline poster="IMG_5286.PNG">
          <source src="https://assets.codepen.io/15323229/469ec902-6f85-d318-7491-a350336f4989_custom.mp4" type="video/mp4">
        </video>
      </div>

      <div class="hero-content container floaty">
        <h1><span class="stroke">Engineered</span> <span class="glow">to Drift</span></h1>
        <p class="hero-sub neon-text">Precision-built karts tuned for smooth slides.</p>

        <div class="hero-actions">
          <a href="#karts" class="btn neon-btn pulse" data-link>Explore Karts</a>
          <a href="#build" class="btn secondary" data-link>Configure Build</a>
        </div>
      </div>
    </section>

    <!-- ================= KARTS ================= -->
    <section id="karts" class="route section hidden">
      <div class="karts-video-bg">
        <video autoplay muted loop playsinline>
          <source src="https://assets.codepen.io/15323229/bbfbad66-75a9-0c8b-f385-7a491f2940e8_custom.mp4" type="video/mp4">
        </video>
        <div class="karts-overlay"></div>
      </div>

      <div class="karts-content">
        <div class="section-head">
          <h1 class="neon-text">Our Karts</h1>
          <p>Launching with the S-kart-Go. Electric Es-kart-Go coming soon.</p>
        </div>

        <div class="cards hover-lift">

          <!-- S-kart-Go -->
          <article class="card">
            <div class="card-media">
              <video class="card-video" autoplay muted loop playsinline>
                <source src="https://assets.codepen.io/15323229/43bd0f6c-6c62-888e-903f-4df78a449110_custom.mp4" type="video/mp4">
              </video>
            </div>
            <div class="card-body">
              <h3 class="neon-text">S-kart-Go</h3>
              <ul class="specs">
                <li>Hydraulic rear disc brake</li>
                <li>Hydraulic E-brake handle</li>
                <li>3-speed 125cc engine</li>
                <li>Custom lighting &amp; colors</li>
                <li>Keyed ignition</li>
                <li>Push-to-start button</li>
              </ul>
              <a class="btn neon-btn pulse" href="#build" data-link>Configure &amp; Request Quote</a>
            </div>
          </article>

          <!-- Es-kart-Go -->
          <article class="card">
            <div class="coming-badge">Coming Soon</div>
            <img src="yellowkart.jpg" alt="Es-kart-Go prototype yellow kart">
            <div class="card-body">
              <h3 class="neon-text">Es-kart-Go</h3>
              <ul class="specs">
                <li>Balanced weight distribution</li>
                <li>Drift-ready chassis setup</li>
                <li>Service-friendly open layout</li>
              </ul>
              <a class="btn secondary" href="#build" data-link>Join Waitlist</a>
            </div>
          </article>

        </div>
      </div>
    </section>

    <!-- ================= RIDERS & KARTS (SLIDER) ================= -->
    <section id="riders" class="route section hidden riders-section">
      <div class="section-head">
        <h1 class="neon-text">Riders &amp; Karts</h1>
        <p>Real people, real smoke — shots from test days and events.</p>
      </div>

      <div class="slider">
        <button class="slider-btn prev" aria-label="Previous slide">‹</button>

        <div class="slider-window">
          <div class="slider-track">
            <div class="slide active">
              <img src="kartsdinos1.jpg" alt="Three riders lined up on drift karts">
            </div>
            <div class="slide">
              <img src="kartsdinos2.jpg" alt="Three riders on drift karts on city street">
            </div>
            <div class="slide">
              <img src="whitekart.jpg" alt="White Snailkart with blue wheels in shop">
            </div>
            <div class="slide">
              <img src="yellowkart.jpg" alt="Yellow Snailkart in workshop">
            </div>
            <div class="slide">
              <img src="yellowpinkkart.jpg" alt="Yellow and pink Snailkarts parked in shop">
            </div>
            <div class="slide">
              <img src="pinkkart.jpg" alt="Pink Snailkart close-up in shop">
            </div>
            <div class="slide">
              <video class="slider-video" controls muted>
                <source src="7136d24717104a3f819ae4c0f21c5e98-_1_.mp4" type="video/mp4">
                Your browser does not support the video tag.
              </video>
            </div>
          </div>
        </div>

        <button class="slider-btn next" aria-label="Next slide">›</button>
      </div>

      <div class="slider-dots" aria-label="Select slide">
        <button class="dot active" data-slide="0"></button>
        <button class="dot" data-slide="1"></button>
        <button class="dot" data-slide="2"></button>
        <button class="dot" data-slide="3"></button>
        <button class="dot" data-slide="4"></button>
        <button class="dot" data-slide="5"></button>
        <button class="dot" data-slide="6"></button>
      </div>
    </section>

    <!-- ================= GALLERY ================= -->
    <section id="gallery" class="route section hidden">
      <div class="gallery-video-bg">
        <video autoplay muted loop playsinline>
          <source src="https://assets.codepen.io/15323229/72ba602c-7f10-d743-5218-bd99e9be7543_custom.mp4" type="video/mp4">
        </video>
        <div class="gallery-overlay"></div>
      </div>

      <div class="gallery-content">
        <div class="section-head">
          <h1 class="neon-text">Gallery</h1>
          <p>Workshop snapshots and in-progress builds.</p>
        </div>

        <div class="masonry hover-lift">
          <!-- existing remote shots -->
          <figure class="tile"><img src="https://assets.codepen.io/15323229/IMG_4933%20%281%29.png" alt=""></figure>
          <figure class="tile"><img src="https://assets.codepen.io/15323229/IMG_4932.png" alt=""></figure>
          <figure class="tile"><img src="https://assets.codepen.io/15323229/Photo%20Sep%2002%202025%2C%209%2003%2029%20PM%20%281%29.jpg" alt=""></figure>
          <figure class="tile"><img src="https://assets.codepen.io/15323229/Photo%20Sep%2002%202025%2C%209%2003%2029%20PM%20%282%29.jpg" alt=""></figure>
          <figure class="tile"><img src="https://assets.codepen.io/15323229/IMG_4806.jpg" alt=""></figure>

          <!-- new local shots -->
          <figure class="tile"><img src="kartsdinos1.jpg" alt="Riders and karts"></figure>
          <figure class="tile"><img src="yellowkart.jpg" alt="Yellow kart side view"></figure>
          <figure class="tile"><img src="whitekart.jpg" alt="White kart side view"></figure>
        </div>
      </div>
    </section>

    <!-- ================= TESTIMONIALS ================= -->
    <section id="testimonials" class="route section container hidden">
      <div class="section-head">
        <h2 class="neon-text">What Drivers Say</h2>
        <p>Feedback from test days and early owners.</p>
      </div>

      <div class="cards testimonials hover-lift">
        <article class="card quote">
          <p>“The chassis rotation is super predictable.”</p>
          <div class="quote-meta"><span class="dot"></span> Alex R.</div>
        </article>

        <article class="card quote">
          <p>“E-brake + hydro disc is perfect for initiations.”</p>
          <div class="quote-meta"><span class="dot"></span> Marisol V.</div>
        </article>

        <article class="card quote">
          <p>“We put a dozen hours on it the first weekend. Nothing broke.”</p>
          <div class="quote-meta"><span class="dot"></span> Ken P.</div>
        </article>
      </div>
    </section>

    <!-- ================= BUILD ================= -->
    <section id="build" class="route section hidden">
      <div class="build-video-bg">
        <video autoplay muted loop playsinline>
          <source src="https://assets.codepen.io/15323229/VideoAug30202542731PM-ezgif.com-resize-video.mov" type="video/mp4">
        </video>
        <div class="build-overlay"></div>
      </div>

      <div class="build-content">
        <div class="section-head neon-head">
          <h1 class="neon-text">Build Your Snailkart</h1>
          <div class="neon-underline"></div>
          <p class="neon-sub">Choose your spec. We’ll review and send a quote.</p>
        </div>

        <div class="contact-card neon-card neon-scan">
          <form id="buildForm" action="https://formspree.io/f/xandlqzb" method="POST" class="contact-form">
            <input type="hidden" name="_subject" value="New Snailkart Build Request">

            <div class="grid" style="grid-template-columns:1fr 1fr;gap:1rem;">

              <!-- Kart type & engine pricing -->
              <div>
                <label for="kartType">Kart Type</label>
                <select id="kartType" name="Kart Type" required>
                  <option value="Gas">Gas (125cc)</option>
                  <option value="Electric">Electric</option>
                </select>
              </div>

              <div>
                <label for="engineChoice">Engine</label>
                <select id="engineChoice" name="Engine">
                  <!-- values are price in USD -->
                  <option value="300">125cc Gas (+$300)</option>
                  <option value="500">Electric Motor (+$500)</option>
                </select>
                <small class="field-note">Electric automatically adds required battery (+$600).</small>
              </div>

              <!-- Frame -->
              <div>
                <label for="frame">Frame</label>
                <select id="frame" name="Frame">
                  <option value="2000">Standard Frame (+$2,000)</option>
                  <option value="2600">Custom Frame (+$2,600)</option>
                </select>
              </div>

              <!-- Steering -->
              <div>
                <label for="steering">Steering Wheel</label>
                <select id="steering" name="Steering Wheel">
                  <option value="100">Standard (+$100)</option>
                  <option value="150">Custom (+$150)</option>
                </select>
              </div>

              <!-- Seat -->
              <div>
                <label for="seat">Seat Type</label>
                <select id="seat" name="Seat">
                  <option value="75">Standard (+$75)</option>
                  <option value="150">Custom (+$150)</option>
                </select>
              </div>

              <!-- Wheels & Tires -->
              <div>
                <label for="wheels">Wheels &amp; Tires</label>
                <select id="wheels" name="Wheels & Tires">
                  <option value="700">Standard Drift Set (+$700)</option>
                </select>
              </div>

              <!-- Wheel color options -->
              <div>
                <label for="wheelColor">Wheel Color</label>
                <select id="wheelColor" name="Wheel Color">
                  <option value="0">Black / Raw (no extra)</option>
                  <option value="125">Basic Color (+$125)</option>
                  <option value="165">Flake / Candy / 2-Part (+$165)</option>
                </select>
              </div>

              <!-- PVC slicks -->
              <div>
                <label for="pvcSlicks">Replacement PVC Slicks</label>
                <select id="pvcSlicks" name="PVC Slicks">
                  <option value="0">No extra slicks</option>
                  <option value="50">1 Pair (+$50)</option>
                  <option value="125">3 Pairs Bundle (+$125)</option>
                </select>
              </div>

              <!-- Kart color / lighting / accessories -->
              <div>
                <label for="kartColor">Kart Color</label>
                <input id="kartColor" type="color" name="Kart Color" value="#c8ff00">
              </div>

              <div>
                <label for="lighting">Lighting Color</label>
                <select id="lighting" name="Lighting">
                  <option value="Red">Red</option>
                  <option value="Blue">Blue</option>
                  <option value="Green">Green</option>
                  <option value="White">White</option>
                  <option value="Custom">Custom</option>
                </select>
              </div>

              <div>
                <label for="accessories">Color-Matched Accessories</label>
                <select id="accessories" name="Color Matched Accessories">
                  <option value="0">None</option>
                  <option value="150">Basic Package (+$150)</option>
                  <option value="300">Full Package (+$300)</option>
                </select>
              </div>

            </div>

            <h3 class="neon-text" style="margin-top:1rem;">Your Info</h3>

            <div class="grid" style="grid-template-columns:1fr 1fr;gap:1rem;">
              <div>
                <label for="name">Name</label>
                <input id="name" type="text" name="Name" required>
              </div>
              <div>
                <label for="email">Email</label>
                <input id="email" type="email" name="Email" required>
              </div>
            </div>

            <label for="notes">Notes</label>
            <textarea id="notes" name="Notes" rows="4" placeholder="Tell us how you’ll use it, preferred colors, etc."></textarea>

            <p class="build-total">
              Estimated Build Total: <span id="buildTotal">$0</span> USD
              <br><span class="build-small">Final quote may vary with tax, freight, and custom fab.</span>
            </p>

            <button type="submit" class="btn neon-btn pulse">Submit Build Sheet</button>
            <p id="buildStatus" class="form-status"></p>
          </form>

        </div>
      </div>
    </section>

    <!-- ================= CONTACT ================= -->
    <section id="contact" class="route section container contact hidden">
      <div class="contact-card">
        <div class="contact-body">

          <h1 class="neon-text">Contact</h1>
          <p>Tell us how many karts you need, and any special requests.</p>

          <form id="contactForm" action="https://formspree.io/f/xandlqzb" method="POST" class="contact-form">
            <div class="grid">
              <div>
                <label for="cname">Name</label>
                <input id="cname" type="text" name="name" required>
              </div>
              <div>
                <label for="cemail">Email</label>
                <input id="cemail" type="email" name="email" required>
              </div>
            </div>

            <label for="company">Company</label>
            <input id="company" type="text" name="company">

            <label for="cmsg">Message</label>
            <textarea id="cmsg" name="message" rows="5" required></textarea>

            <button class="btn neon-btn pulse" type="submit">Send</button>
            <p id="formStatus" class="form-status"></p>
          </form>

        </div>
      </div>
    </section>

  </main>

  <!-- ================= FOOTER ================= -->
  <footer class="site-footer">
    <div class="container footer-inner">
      © <span id="year"></span> Snailkarts
    </div>
  </footer>

  <!-- ========================================================= -->
  <!--                 CLEANED / OPTIMIZED JS                    -->
  <!-- ========================================================= -->
  <script>
    // ------------------ DOM SHORTCUTS ------------------
    const routes = ["home", "karts", "riders", "gallery", "testimonials", "build", "contact"];
    const sections = Object.fromEntries(routes.map(r => [r, document.getElementById(r)]));
    const navLinks = [...document.querySelectorAll('.site-nav a[data-link]')];

    // ------------------ ROUTER ------------------
    function setActive(route) {
      routes.forEach(r => {
        const sec = sections[r];
        if (!sec) return;

        const active = (r === route);
        sec.classList.toggle("hidden", !active);

        // control videos in each section
        sec.querySelectorAll("video").forEach(v => {
          if (active) {
            if (v.autoplay && v.paused) v.play().catch(() => {});
          } else {
            v.pause();
          }
        });

        if (active) {
          sec.classList.remove("enter");
          void sec.offsetWidth;
          sec.classList.add("enter");
        }
      });

      navLinks.forEach(a =>
        a.classList.toggle("active", a.getAttribute("href") === `#${route}`)
      );

      window.scrollTo({ top: 0, behavior: "instant" });

      if (window.plausible)
        plausible("pageview", { u: location.origin + "/#" + route });
    }

    function router() {
      const hash = location.hash.slice(1);
      setActive(routes.includes(hash) ? hash : "home");
    }

    // ------------------ MOBILE NAV ------------------
    const navToggle = document.querySelector(".nav-toggle");
    if (navToggle) {
      navToggle.addEventListener("click", () => {
        const isOpen = document.body.classList.toggle("nav-open");
        navToggle.setAttribute("aria-expanded", String(isOpen));
      });
    }

    // ------------------ AJAX FORMS ------------------
    function wireForm(formId, statusId, eventName) {
      const form = document.getElementById(formId);
      const out = document.getElementById(statusId);
      if (!form || !out) return;

      form.addEventListener("submit", async e => {
        e.preventDefault();
        out.textContent = "Sending…";

        try {
          const res = await fetch(form.action, {
            method: "POST",
            headers: { "Accept": "application/json" },
            body: new FormData(form),
          });

          if (res.ok) {
            out.textContent = "Thanks! We’ll reply shortly.";
            out.style.color = "#c8ff00";
            if (formId === "buildForm") {
              form.reset();
              updateBuildTotal(); // reset price display too
            } else {
              form.reset();
            }
            if (window.plausible) plausible(eventName);
          } else {
            out.textContent = "Error. Try again.";
            out.style.color = "#ffb4c8";
          }
        } catch {
          out.textContent = "Network error.";
          out.style.color = "#ffb4c8";
        }
      });
    }

    wireForm("contactForm", "formStatus", "Contact Submit");
    wireForm("buildForm", "buildStatus", "Build Sheet Submit");

    // ------------------ BUILD PRICE CALCULATOR ------------------
    const buildPriceIds = [
      "kartType",
      "engineChoice",
      "frame",
      "steering",
      "seat",
      "wheels",
      "wheelColor",
      "pvcSlicks",
      "accessories"
    ];

    function parseMoney(val) {
      const n = Number(val);
      return isNaN(n) ? 0 : n;
    }

    function updateBuildTotal() {
      const type = document.getElementById("kartType")?.value || "Gas";
      const enginePrice = parseMoney(document.getElementById("engineChoice")?.value || 0);
      const framePrice = parseMoney(document.getElementById("frame")?.value || 0);
      const steeringPrice = parseMoney(document.getElementById("steering")?.value || 0);
      const seatPrice = parseMoney(document.getElementById("seat")?.value || 0);
      const wheelsPrice = parseMoney(document.getElementById("wheels")?.value || 0);
      const wheelColorPrice = parseMoney(document.getElementById("wheelColor")?.value || 0);
      const pvcPrice = parseMoney(document.getElementById("pvcSlicks")?.value || 0);
      const accessoriesPrice = parseMoney(document.getElementById("accessories")?.value || 0);

      let total = framePrice + steeringPrice + seatPrice +
                  wheelsPrice + wheelColorPrice + pvcPrice +
                  accessoriesPrice + enginePrice;

      // add battery only if electric kart is selected
      if (type === "Electric") {
        total += 600; // battery price
      }

      const out = document.getElementById("buildTotal");
      if (out) out.textContent = `$${total.toLocaleString()}`;
    }

    buildPriceIds.forEach(id => {
      const el = document.getElementById(id);
      if (el) el.addEventListener("change", updateBuildTotal);
    });

    // ------------------ RIDERS SLIDER ------------------
    (function initSlider() {
      const slider = document.querySelector(".slider");
      if (!slider) return;

      const track = slider.querySelector(".slider-track");
      const slides = [...slider.querySelectorAll(".slide")];
      const prevBtn = slider.querySelector(".slider-btn.prev");
      const nextBtn = slider.querySelector(".slider-btn.next");
      const dots = [...document.querySelectorAll(".slider-dots .dot")];

      let index = 0;

      function showSlide(i) {
        if (!slides.length) return;
        index = (i + slides.length) % slides.length;

        slides.forEach((s, idx) => {
          s.classList.toggle("active", idx === index);
        });

        dots.forEach((d, idx) => {
          d.classList.toggle("active", idx === index);
        });

        // Pause all videos except active slide
        slides.forEach((s, idx) => {
          const vid = s.querySelector("video");
          if (!vid) return;
          if (idx === index) {
            if (vid.paused) vid.play().catch(() => {});
          } else {
            vid.pause();
          }
        });

        const pct = -index * 100;
        track.style.transform = `translateX(${pct}%)`;
      }

      prevBtn?.addEventListener("click", () => showSlide(index - 1));
      nextBtn?.addEventListener("click", () => showSlide(index + 1));

      dots.forEach((dot, i) =>
        dot.addEventListener("click", () => showSlide(i))
      );

      showSlide(0);
    })();

    // ------------------ DOM READY ------------------
    window.addEventListener("DOMContentLoaded", () => {
      router();
      const yearEl = document.getElementById("year");
      if (yearEl) yearEl.textContent = new Date().getFullYear();

      const first = document.querySelector(".route:not(.hidden)");
      if (first) first.classList.add("enter");

      document.body.addEventListener("click", e => {
        const btn = e.target.closest('[data-track="cta"]');
        if (btn && window.plausible) {
          plausible("CTA Click", { props: { label: btn.dataset.label || btn.textContent.trim() } });
        }
      });

      updateBuildTotal();
    });

    window.addEventListener("hashchange", router);
  </script>

</body>
</html>
